var app={settings:{debug:!1,titleSep:" - ",pageTitle:"Cronometrei",homeTitleFull:"O tempo, sob controle",startButton:"Iniciar",pauseButton:"Pausar",continueButton:"Continuar",clearButton:"Limpar",startInstruction:"Barra de Espaço",clearInstruction:"Esc",exitMessage:"Seu cronometro será perdido, deseja mesmo sair?",clearMessage:"Deseja mesmo zerar seu cronometro?",doing:!1,time:0,currentTimer:0,loop:!1,needToConfirm:!1},init:function(){return app.settings.debug&&console.log("Initializing app"),window.onbeforeunload=app.confirmExit,app.createAppCanvas(),app.settings.needToConfirm=!1,app.settings.time=0,app.settings.currentTimer=0,app.sendToScreen(app.format_seconds(0)),app.setPageTitle(),app.setBackground(),app.settings.debug&&console.log("Binding keyboard shortcuts"),$(document).keydown(function(t){app.keyDefaults(t)}).keyup(function(t){app.keyHandler(t)}),!1},createAppCanvas:function(){$("#application").append('<div id="titleRow" class="row"></div>'),$("#application").append('<div id="controlRow" class="row"></div>'),$("#titleRow").append('<h1 id="appTitle"></h1><div id="timer" class="col-md-8 col-md-offset-2"></div>'),$("#controlRow").append('<div id="startStop" class="button col-md-2 col-md-offset-3" onclick="app.startStopTimer();"><div id="startStopLabel"></div><div id="startStopInstruction" class="instructions"></div></div>'),$("#controlRow").append('<div id="clear" class="button col-md-2 col-md-offset-2" onclick="app.clearTimer();"><div id="clearLabel"></div><div id="clearInstruction" class="instructions"></div></div>')},setPageTitle:function(){document.title=app.settings.pageTitle+app.settings.titleSep+app.settings.homeTitleFull,$("h1#appTitle").html(app.settings.pageTitle),$("#startStopLabel").html(app.settings.startButton),$("#startStopInstruction").html(app.settings.startInstruction),$("#clearLabel").html(app.settings.clearButton),$("#clearInstruction").html(app.settings.clearInstruction)},keyDefaults:function(t){switch(t.keyCode){case 32:t.preventDefault();break;case 27:t.preventDefault();break;default:return!1}},keyHandler:function(t){switch(t.keyCode){case 32:app.startStopTimer();break;case 27:app.clearTimer();break;default:return!1}},confirmExit:function(){return app.settings.needToConfirm?app.settings.exitMessage:void 0},setBackground:function(){app.settings.debug&&console.log("Setting background image");var t="gallery_2_557_212946-1600x900.jpg";$("body").css("background-image",'url("assets/images/'+t+'")')},startStopTimer:function(){return app.settings.debug&&console.log("Call start/stop timer"),app.settings.doing?app.pauseTimer():app.startTimer(app.settings.currentTimer),!1},startTimer:function(){app.settings.debug&&console.log("Starting timer"),app.settings.needToConfirm=!0,app.settings.doing=1,app.settings.time="undefined"==typeof app.settings.currentTimer?new Date:new Date-app.settings.currentTimer,app.settings.loop=window.setInterval("app.update()",10),$("#startStopLabel").html(app.settings.pauseButton)},stopTimer:function(){app.settings.debug&&console.log("Stopping timer"),app.settings.doing=0,clearInterval(app.settings.loop),$("#startStopLabel").html(app.settings.startButton)},pauseTimer:function(){app.settings.debug&&console.log("Pausing timer"),app.settings.doing=0,clearInterval(app.settings.loop),app.settings.currentTimer=app.getTime(),$("#startStopLabel").html(app.settings.continueButton)},clearTimer:function(){app.settings.debug&&console.log("Clear timer"),confirm(app.settings.clearMessage)&&(app.stopTimer(),app.settings.needToConfirm=!1,app.settings.time=0,app.settings.currentTimer=0,app.sendToScreen(app.format_seconds(0)))},update:function(){app.sendToScreen(app.format_seconds(app.getTime()))},sendToScreen:function(t){$("#timer").text(t)},getTime:function(){return new Date-app.settings.time},format_seconds:function(t){isNaN(t)&&(t=0);var e=new Date(t),n=e.getUTCHours(),i=e.getMinutes(),t=e.getSeconds(),s=e.getMilliseconds();return 10>n&&(n="0"+n),10>i&&(i="0"+i),10>t&&(t="0"+t),10>s?s="00"+s:100>s&&(s="0"+s),document.title=n+":"+i+":"+t+app.settings.titleSep+app.settings.pageTitle,n+":"+i+":"+t+":"+s}};$(document).ready(function(){app.init()});